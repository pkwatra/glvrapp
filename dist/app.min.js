angular.module("glvrApp",["ui.router","720kb.datepicker","schemaService"]).config(["$stateProvider","$urlRouterProvider","$compileProvider",function($stateProvider,$urlRouterProvider,$compileProvider){$compileProvider.aHrefSanitizationWhitelist(/^\s*(|blob|):/),$urlRouterProvider.otherwise("/home"),$stateProvider.state("home",{url:"/home",templateUrl:"/views/login.html",controller:"homeController"}).state("landing",{url:"/landing",templateUrl:"/views/landing.html",controller:"landingController"}).state("firstfloor",{url:"/firstfloor",templateUrl:"/partials/firstfloor.html",controller:"firstfloorController"})}]),angular.module("schemaService",[]).service("SchemaService",function($http){var params={users:{},primary:{},dateFormat:""};window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var hostIp=window.location.origin;return{showLandingImage:function(callback){},showHomeImage:function(callback){console.log("Home controller called!!"),initHome(),animateHome()},getData:function(callback){callback(params)},cancelData:function(callback){params.primary={},callback(params)},getUserName:function(callback){callback(params.users.username)},logoutUser:function(callback){params.users={},callback(params.users.username)},authenticateUser:function(user,callback){var req={method:"POST",url:hostIp+"/login",data:JSON.stringify(user)};$http(req).then(function(resp){resp&&(params.users.username=user.username,callback(resp.data))},function(){callback(null)})},getDateFormat:function(callback){var req={method:"GET",url:hostIp+"/date-format",data:{}};$http(req).then(function(resp){resp&&resp.data?params.dateFormat=resp.data:params.dateFormat="dd-MM-yyyy",callback(params.dateFormat)},function(){params.dateFormat="dd-MM-yyyy",callback(params.dateFormat)})}}}),angular.module("glvrApp").controller("homeController",["$rootScope","$scope","$location","SchemaService",function($rootScope,$scope,$location,SchemaService){$scope.submitted=!1,$scope.inValidUser=!1,$scope.adminError=!1,$rootScope.isUserLoggedIn=!1,SchemaService.showHomeImage(function(re){console.log("Showing Home page!")}),$scope.showLoginScreen=function(){$(".login-panel").animate({right:"0"})},$scope.hideLoginScreen=function(){$(".login-panel").animate({right:"-400px"})},$scope.loginUser=function(form){if(console.log("Login User"),$scope.submitted=!0,!form.$valid)return!1;var user={};user.username=$scope.username,user.password=$scope.password,SchemaService.authenticateUser(user,function(data){if(console.log(data),0==data)$scope.inValidUser=!0;else{if(1!=data)return $scope.adminError=!0,!1;console.log("Landing Page"),$location.path("/landing")}})}}]),angular.module("glvrApp").controller("landingController",["$rootScope","$scope","$location","SchemaService",function($rootScope,$scope,$location,SchemaService){function HideMenuControl(){$(".main-nav").animate({right:"-400px"},function(){$(".main-menu-link").show()})}SchemaService.getUserName(function(res){res?$rootScope.isUserLoggedIn=!0:$location.path("/home"),ChangeMeshToStep1(),BindDragEvents(),StopRotation(!0)}),$rootScope.showMenu=function(){$(".main-menu-link").hide(),$(".main-nav").animate({right:"0"})},$scope.hideMenu=function(){$(".main-nav").animate({right:"-400px"},function(){$(".main-menu-link").show()})},$scope.goToStep2=function(){HideMenuControl(),ChangeMeshToStep2(),BindDragEvents(),StopRotation(!0),CreateMesh(!0)},$scope.goToStep1=function(){HideMenuControl(),ChangeMeshToStep1(),BindDragEvents(),StopRotation(!0),RemoveAllMesh(),CreateNavigationMesh()}}]),angular.module("glvrApp").controller("firstfloorController",["$rootScope","$scope","$location","SchemaService",function($rootScope,$scope,$location,SchemaService){}]),angular.module("glvrApp").controller("loginController",["$rootScope","$scope","$location","SchemaService",function($rootScope,$scope,$location,SchemaService){$rootScope.isUserLoggedIn=!1,$scope.logoutUser=function(){SchemaService.logoutUser(function(res){angular.isObject(res)||($rootScope.isUserLoggedIn=!1,$location.path("/home"))})}}]),angular.module("glvrApp").directive("confirmClick",[function(){return{priority:-1,restrict:"A",link:function(scope,element,attrs){element.bind("click",function(e){if("true"==attrs.enableConfirm){var message=attrs.confirmClick;message&&!confirm(message)&&(e.stopImmediatePropagation(),e.preventDefault())}})}}}]),angular.module("glvrApp").directive("serverError",function($parse,$compile){return{template:'<div class="modal modal-dialog"><div class="modal-header"><h4>Server Error</h4></div><div class="modal-content"><h5>Some error occured. Please contact administrator for details.</h5></div><div class="modal-footer"><button class="modal-close" ng-click="close()">OK</button></div></div>',restrict:"A",link:function(scope,element,attrs,model){scope.close=function(){scope.adminError=!1}}}});
//# sourceMappingURL=app.min.js.map